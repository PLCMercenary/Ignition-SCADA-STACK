{"version":3,"sources":["core/opcua-iiot-core-browser.js"],"names":["require","install","de","biancoroyal","opcua","iiot","core","browser","internalDebugLog","browse","session","topic","this","coreBrowser","Promise","reject","Error","browseOptions","nodeId","referenceTypeId","includeSubtypes","browseDirection","resultMask","nodeOPCUA","browse_service","BrowseDirection","Forward","err","browseResult","resolve","browseAddressSpaceItems","addressSpaceItems","forEach","push","item","module","exports"],"mappings":"AAQA,aACAA,QAAQ,sBAAsBC,UAS9B,IAAIC,GAAKA,IAAM,CAACC,YAAa,CAACC,MAAO,CAACC,KAAM,CAACC,KAAM,CAACC,QAAS,QAA7DL,GAAAC,YAAeC,MAACD,KAAAA,KAAaI,QAAQD,KAACD,GAAOC,YAAOC,MAASF,KAAxBC,KAAgCC,QAAAD,MAAAN,QAAA,qBAAtDE,GACfA,YAAGC,MAAYC,KAAMC,KAAKC,QAAKC,iBAAkBJ,GAAAA,YAAHC,MAA+BG,KAAAA,KAAQD,QAAQN,kBAAQA,QAAqB,QAArBA,CAAqB,qBAC1HE,GAAGC,YAAYC,MAAMC,KAAKC,KAAKC,QAAQC,eAAvCN,GAA0DA,YAAGC,MAAYC,KAAMC,KAAKC,QAAKC,gBAA/BP,QAA2DA,QAA3DA,CAAmE,6BAG7HE,GAAGC,YAAYC,MAAMC,KAAKC,KAAKC,QAAQE,OAAS,SAAUC,EAASC,GAAnET,IAAGC,EAAHS,KACE,OAAIC,IAAAA,QACJ,SAAWC,EACTC,GACOL,GACHK,EAAO,IAAIC,MAAM,gCAGnB,IAAIC,EACF,CACEC,CACAC,OAAAA,EACAC,gBAHF,YAIEC,iBAAiBR,EACjBS,gBAAYT,EAAAP,KAAAiB,UAAAC,eAAAC,gBAAAC,QAEdJ,WAAA,IAEEH,CACAC,OAAAA,EACAC,gBAAiBR,aACjBS,iBAAY,EAbhBD,gBAAAR,EAAAP,KAAAiB,UAAAC,eAAAC,gBAAAC,QAaIJ,WAAY,KAObZ,EAAMD,OAAAQ,EAAA,SAAAU,EAAAC,GACLC,EACDd,EAAAY,GA5BPE,EAAAD,QAuCMb,GAAAA,YAAOX,MAAIY,KAAMV,KAAAC,QAAAuB,wBAAjB,SAAApB,EAAAqB,GACD,IAAAlB,EAAAD,KAJL,OAAO,IAAIE,QAMP,SAAIG,EAAAA,GAJCP,GAMLqB,EAAAA,IAAAA,MAAkBC,gCAGdb,IAAAA,EAAiB,GAEjBE,EAAAA,QAAiBR,SAAiBU,GAClCD,EAAYW,KAAA,CALdf,OAAAgB,EAAAhB,OAEEC,gBAAiB,YAMnBF,iBAAmB,EACjBC,gBADiBL,EAAAP,KAAAiB,UAAAC,eAAAC,gBAAAC,QAEjBP,WAAAA,KAGAG,EAAYW,KAAA,CALdf,OAAAgB,EAAAhB,OATFC,gBAAA,aAYIC,iBAAiB,EAMrBV,gBAAeO,EAAeX,KAAUqB,UAAKC,eAAcH,gBAAAC,QACrDC,WAAK,OAIRjB,EAAAD,OAAAQ,EAAA,SAAAU,EAAAC,GALHD,EA1BJZ,EAAAY,GA8BQE,EAAQD,QAOlBO,OAAOC,QAAUlC,GAAGC,YAAYC,MAAMC,KAAKC,KAAKC","file":"../../core/opcua-iiot-core-browser.js","sourcesContent":["/**\n The BSD 3-Clause License\n\n Copyright 2017,2018 - Klaus Landsdorf (http://bianco-royal.de/)\n Copyright 2015,2016 - Mika Karaila, Valmet Automation Inc. (node-red-contrib-opcua)\n All rights reserved.\n node-red-contrib-iiot-opcua\n */\n'use strict'\nrequire('source-map-support').install()\n\n/**\n * Nested namespace settings.\n *\n * @type {{biancoroyal: {opcua: {iiot: {core: {browser: {}}}}}}}\n *\n * @Namesapce de.biancoroyal.opcua.iiot.core.browser\n */\nvar de = de || {biancoroyal: {opcua: {iiot: {core: {browser: {}}}}}} // eslint-disable-line no-use-before-define\nde.biancoroyal.opcua.iiot.core.browser.core = de.biancoroyal.opcua.iiot.core.browser.core || require('./opcua-iiot-core') // eslint-disable-line no-use-before-define\nde.biancoroyal.opcua.iiot.core.browser.internalDebugLog = de.biancoroyal.opcua.iiot.core.browser.internalDebugLog || require('debug')('opcuaIIoT:browser') // eslint-disable-line no-use-before-define\nde.biancoroyal.opcua.iiot.core.browser.detailDebugLog = de.biancoroyal.opcua.iiot.core.browser.detailDebugLog || require('debug')('opcuaIIoT:browser:details') // eslint-disable-line no-use-before-define\n\nde.biancoroyal.opcua.iiot.core.browser.browse = function (session, topic) {\n  let coreBrowser = this\n  return new Promise(\n    function (resolve, reject) {\n      if (!session) {\n        reject(new Error('Session Not Ready To Browse'))\n      }\n\n      let browseOptions = [\n        {\n          nodeId: topic,\n          referenceTypeId: 'Organizes',\n          includeSubtypes: true,\n          browseDirection: coreBrowser.core.nodeOPCUA.browse_service.BrowseDirection.Forward,\n          resultMask: 0x3f\n        },\n        {\n          nodeId: topic,\n          referenceTypeId: 'Aggregates',\n          includeSubtypes: true,\n          browseDirection: coreBrowser.core.nodeOPCUA.browse_service.BrowseDirection.Forward,\n          resultMask: 0x3f\n        }\n      ]\n\n      session.browse(browseOptions, function (err, browseResult) {\n        if (err) {\n          reject(err)\n        } else {\n          resolve(browseResult)\n        }\n      })\n    }\n  )\n}\n\nde.biancoroyal.opcua.iiot.core.browser.browseAddressSpaceItems = function (session, addressSpaceItems) {\n  let coreBrowser = this\n  return new Promise(\n    function (resolve, reject) {\n      if (!session) {\n        reject(new Error('Session Not Ready To Browse'))\n      }\n\n      let browseOptions = []\n\n      addressSpaceItems.forEach(function (item) {\n        browseOptions.push({\n          nodeId: item.nodeId,\n          referenceTypeId: 'Organizes',\n          includeSubtypes: true,\n          browseDirection: coreBrowser.core.nodeOPCUA.browse_service.BrowseDirection.Forward,\n          resultMask: 0x3f\n        })\n\n        browseOptions.push({\n          nodeId: item.nodeId,\n          referenceTypeId: 'Aggregates',\n          includeSubtypes: true,\n          browseDirection: coreBrowser.core.nodeOPCUA.browse_service.BrowseDirection.Forward,\n          resultMask: 0x3f\n        })\n      })\n\n      session.browse(browseOptions, function (err, browseResult) {\n        if (err) {\n          reject(err)\n        } else {\n          resolve(browseResult)\n        }\n      })\n    }\n  )\n}\n\nmodule.exports = de.biancoroyal.opcua.iiot.core.browser\n"]}